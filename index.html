<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>JoshCorp Labs</title>
    <meta charset="utf-8">
    <meta name="description" content="JoshCorp Labs where Josh Kasuboski tests things out">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/mvp.css">
  </head>
  <body>
    <header>
      <h1>JoshCorp Labs</h1>
      <p>Where <a href="https://www.joshkasuboski.com">Josh Kasuboski</a> tests things out.</p>
    </header>
    <main id="stats" style="display: none;">
      <section>
        <h2>Dev.to Stats</h2>
        <ul>
          <li><strong>👍 Reactions</strong> <span id="reactions-value"></span></li>
          <li><strong>👀 Page Views</strong> <span id="views-value"></span></li>
          <li><strong>📝 Articles</strong> <span id="articles-value"></span></li>
        </ul>
      </section>
    </main>

    <script>
      function getStats() {
        const stats = document.querySelector('#stats');
        const reactions = document.querySelector('#reactions-value');
        const views = document.querySelector('#views-value');
        const articles = document.querySelector('#articles-value');
        const url = 'https://raw.githubusercontent.com/kasuboski/stats/main/stats/dev-to.json';
        fetch(url)
          .then(res => res.json())
          .then(data => {
            console.log(data);
            reactions.innerText = data.public_reactions_count;
            views.innerText = data.page_views_count;
            articles.innerText = data.articles_count;
            stats.style.display = "block";
          })
          .catch(err => {
            console.error('Error fetching stats: ', err);
          })
      }

      window.onload = getStats;
    </script>
    <!-- Panelbear Analytics - We respect your privacy -->
    <script async src="https://cdn.panelbear.com/analytics.js?site=H4VRiZxwKD9"></script>
    <script>
        window.panelbear = window.panelbear || function() { (window.panelbear.q = window.panelbear.q || []).push(arguments); };
        panelbear('config', { site: 'H4VRiZxwKD9' });
    </script>

  </body>
</html>
